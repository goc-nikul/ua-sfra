<?xml version="1.0" encoding="UTF-8"?>
<jobs xmlns="http://www.demandware.com/xml/impex/jobs/2015-07-01">
    <job job-id="RefreshExpiredAccessTokens" priority="0">
        <description>Check and refresh the access tokens for MAO, GC, VIP, and SFMC services, stored in custom objects which are going to expire in the next 15(configurable in job Parameters) minutes to make sure a valid token is always stored in the custom object.</description>
        <parameters/>
        <split sequential="true">
            <contexts template-ref="template_215">
                <context site-id="CA"/>
                <context site-id="US"/>
            </contexts>
            <flow-template template-id="template_215">
                <step step-id="RefreshExpiredAccessTokens" type="custom.refreshAccessTokens" enforce-restart="false">
                    <description/>
                    <parameters/>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2020-10-19Z</date>
                <time>07:39:26.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="DataFeedWatch Export" priority="0">
        <description>11/04/2020:Ani:File pattern updated to no upload files to SFTP. DFW shop setting has been changed to pickup files from our impex folder directly using access key setup.
1/10/2023:JLasson:Added MX scope to sibling flow</description>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="US"/>
                <step step-id="DFW Export US" type="custom.CustomFeeds-Process" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="feedConfigString">{    "US": {          "locales": ["en_US"], "feed": ["DataFeedWatch"],  "currency": ["USD"]     } }</parameter>
                    </parameters>
                </step>
            </flow>
            <flow>
                <context site-id="CA"/>
                <step step-id="DFW Export CA" type="custom.CustomFeeds-Process" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="feedConfigString">{    "Language":{       "locales":[          "fr_CA"       ],       "feed":[          "DFWSecondary"       ],       "currency":[          "CAD"       ]    },    "ExtraLocales":{       "locales":[          "en_CA"       ],       "feed":[          "DFWLocaleSpecific"       ],       "currency":[          "CAD"       ]    } }</parameter>
                    </parameters>
                </step>
            </flow>
            <flow>
                <context site-id="MX"/>
                <step step-id="DFW Export MX" type="custom.CustomFeeds-Process" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="feedConfigString">{     "es": {         "locales": ["es_MX"],         "feed": ["DataFeedWatchMX"],         "currency": ["MXN"]     } }</parameter>
                    </parameters>
                </step>
            </flow>
        </split>
        <flow>
            <context site-id="Sites"/>
            <step step-id="StorefrontCatalog-Export" type="ExportCatalog" enforce-restart="false">
                <description>Export the categories to DFW for the shop app</description>
                <parameters>
                    <parameter name="CatalogID">NACatalog_storefront</parameter>
                    <parameter name="ExportCategories">true</parameter>
                    <parameter name="ExportProducts">false</parameter>
                    <parameter name="ExportCategoryAssignments">true</parameter>
                    <parameter name="ExportProductOptions">true</parameter>
                    <parameter name="ExportRecommendations">true</parameter>
                    <parameter name="ExportVariationAttributes">true</parameter>
                    <parameter name="ExportFile">/feeds/DFW/NA_CATALOG_FEEDEXPORT</parameter>
                    <parameter name="OverwriteExportFile">true</parameter>
                </parameters>
            </step>
        </flow>
        <triggers />
    </job>
    <job job-id="MAODOMOrderExport" priority="0">
        <description>This job sends order data to OMS including not confirmed orders(pending payment or fraud check). The job takes order according to next criteria:
                    1. Order export status is ready for export.
                    2. Order status is not canceled or failed.
                    3. Updates order custom attribute is empty
                    The job makes "Create order" request for each order and set EXPORTED status if the call is successful.</description>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="CA"/>
                <template-ref template-id="template_74"/>
            </flow>
            <flow>
                <context site-id="US"/>
                <template-ref template-id="template_74"/>
            </flow>
            <flow-template template-id="template_74">
                <step step-id="CreateOrder" type="custom.MAODOMOrderExport" enforce-restart="false">
                    <description/>
                    <parameters/>
                </step>
            </flow-template>
        </split>
        <rules/>
         <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2020-04-09Z</date-from>
                    <start-time>07:50:55.000Z</start-time>
                    <interval>10m</interval>
                    <day-of-week>
                        <weekday>Friday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Tuesday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>
    <job job-id="ProcessReturnLabelEmailRequests" priority="0">
        <description>This Job processes return label email requests stored in "returnLabelEmailRequests" custom object.</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="ProcessEmailReturnLabelRequests" type="custom.Process-Email-Return-Label-Requests" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2020-07-02Z</date>
                <time>20:26:12.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="AutoCleanCategory" priority="0">
        <description>This Job un-assign all product from the categories</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="AutoUncategorizeNewArrivals" type="custom.autoUncategorizeNewArrivals" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                    <parameter name="isDisabled">false</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="ImportCleanNewArrivals" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/newArrivalAssociationRemoval</parameter>
                    <parameter name="FileNamePattern">^catalog_associations_newArrival.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/newArrivalAssociationRemoval</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <step step-id="AutoCleanCategory" type="custom.autoCleanCategory" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                    <parameter name="CleanCategoryIDs">prep-category,prep_image</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <step step-id="ImportCleanCategories" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">cleanCategory</parameter>
                    <parameter name="FileNamePattern">^catalog_category_associations.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Update</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/cleanCategory</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2020-07-02Z</date>
                <time>20:26:12.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="Product Image and Categorization (US &amp; CA)" priority="0">
        <description>Automatically associates variant images to the master product and assign categories for products in the prep-category</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="CheckPrepCategory" type="custom.checkPrepCategory" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                </parameters>
                <rules>
                    <on-exit status="NOPRODUCTS">
                        <stop-job/>
                    </on-exit>
                </rules>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="Auto Video Assignment" type="custom.assignVideos" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="AutoImageAssignment" type="custom.assignImages" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="AssignSizePrefTokens" type="custom.AssignSizePrefTokens" enforce-restart="false">
                <description>Create size preference token based on product custom attribute through job</description>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="ImportImageVideoAssignment" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/imageAssociation</parameter>
                    <parameter name="FileNamePattern">.*associations.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/s7</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="AutoLookAssignment" type="custom.assignShopTheLook" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="IsQueryAllForSiteProducts">false</parameter>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="ImportAutoLookAssigment" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/shopTheLook</parameter>
                    <parameter name="FileNamePattern">.*ShopTheLook.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">archive/autoLook</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="ImportSizePreferencesToken" type="ImportCatalog" enforce-restart="false">
                <description>Import Size Preferences Token</description>
                <parameters>
                    <parameter name="WorkingFolder">feeds/sizePreferenceToken</parameter>
                    <parameter name="FileNamePattern">.*tokenization.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/sizePreferenceToken</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="AutoCategorizeNewArrivals" type="custom.autoCategorizeNewArrivals" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                    <parameter name="isDisabled">false</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="ImportNewArrivals" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/newArrivalAssociation</parameter>
                    <parameter name="FileNamePattern">^catalog_associations_newArrival.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/newArrivalAssociation</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="AutoCategorization" type="custom.autoCategorization" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                    <parameter name="useNewCategoryRules">true</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="ImportCategorization" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/categoryAssociation</parameter>
                    <parameter name="FileNamePattern">^catalog_category_associations.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/s7</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="GenerateProductClassificationXML" type="custom.generateProductClassificationXML" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="importClassification" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/productClassifications</parameter>
                    <parameter name="FileNamePattern">^product_classifications.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/s7</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="AutoSize - EN" type="custom.assignSize" enforce-restart="false">
                <description>Put size translation at EN level</description>
                <parameters>
                    <parameter name="FootwearSizeVariation">sizevariation_en</parameter>
                    <parameter name="CatalogID">NACatalog</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Import Catalog - AutoSize EN" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/sizeAssociation/us</parameter>
                    <parameter name="FileNamePattern">catalog_size_associations_us.xml</parameter>
                    <parameter name="NoFilesFoundHandling">WARN</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">ERROR</parameter>
                    <parameter name="AfterImportFileHandling">Keep</parameter>
                    <parameter name="ArchiveFolder">archive</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="CA"/>
            <step step-id="AutoSize - FR" type="custom.assignSize" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FootwearSizeVariation">sizevariation_fr</parameter>
                    <parameter name="CatalogID">NACatalog</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Import Catalog - AutoSize FR" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/sizeAssociation/ca</parameter>
                    <parameter name="FileNamePattern">catalog_size_associations_ca.xml</parameter>
                    <parameter name="NoFilesFoundHandling">WARN</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">ERROR</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">archive</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="ActivateAllPrepCategorySKUS" type="custom.activatePrepCategorySKUs" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="emailList">andrew.hale@underarmour.com</parameter>
                    <parameter name="inventoryHealth">80</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="CleanupPrepCategory" type="custom.cleanupPrepCategory" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="ImportCleanPrepCategory" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/cleanupPrepCategory</parameter>
                    <parameter name="FileNamePattern">^cleanup_prep_category.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Delete</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/s7</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="AssignLoyaltyExclusiveFlag" type="custom.assignLoyaltyExclusiveFlag" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="CatalogsList">NACatalog_storefront</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Import Loyalty Default Value" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/loyaltyData</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/LoyaltyDefaultImport</parameter>
                </parameters>
            </step>
        </flow>
        <rules>
            <on-running runtime-threshold="60m" enabled="true">
                <mark-job-as-hanging/>
            </on-running>
        </rules>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2017-09-26Z</date-from>
                    <start-time>21:45:00.000Z</start-time>
                    <interval>24h</interval>
                    <day-of-week>
                        <weekday>Wednesday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Friday</weekday>
                        <weekday>Monday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>

    <job job-id="Process on hold orders" priority="0">
        <description>Process orders with 'on hold' custom status</description>
        <parameters/>
        <split sequential="true">
            <contexts template-ref="template_105">
                <context site-id="CA"/>
                <context site-id="US"/>
            </contexts>
            <flow-template template-id="template_105">
                <step step-id="TokenExchange" type="custom.PaymentTokenExchange" enforce-restart="false">
                    <description/>
                    <parameters/>
                </step>
            </flow-template>
        </split>
        <split sequential="true">
            <contexts template-ref="template_172">
                <context site-id="CA"/>
                <context site-id="US"/>
            </contexts>
            <flow-template template-id="template_172">
                <step step-id="ProcessFraudOrders" type="custom.AccertifyProcessFraudOrders" enforce-restart="false">
                    <description>Process orders with AccertifyRecCode Error</description>
                    <parameters/>
                </step>
            </flow-template>
        </split>
        <split sequential="true">
            <contexts template-ref="template_115">
                <context site-id="CA"/>
                <context site-id="US"/>
            </contexts>
            <flow-template template-id="template_115">
                <step step-id="Process" type="custom.accertifyProcess" enforce-restart="false">
                    <description/>
                    <parameters/>
                </step>
                <step step-id="Clear" type="custom.accertifyClear" enforce-restart="false">
                    <description/>
                    <parameters/>
                </step>
            </flow-template>
        </split>
        <split sequential="true">
            <contexts template-ref="template_34">
                <context site-id="CA"/>
                <context site-id="US"/>
            </contexts>
            <flow-template template-id="template_34">
                <step step-id="MaoSendStatusUpdate" type="custom.MaoSendStatusUpdate" enforce-restart="false">
                    <description/>
                    <parameters/>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2020-04-09Z</date-from>
                    <start-time>07:49:36.000Z</start-time>
                    <interval>2h</interval>
                    <day-of-week>
                        <weekday>Friday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Tuesday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>

    <job job-id="Import Catalog" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Download from Amazon S3" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description>to download files from S3 (ecommstaging)</description>
                <parameters>
                    <parameter name="ServiceID">AWS-XML_NA</parameter>
                    <parameter name="KeyAlias">na04-ecomm-staging</parameter>
                    <parameter name="FilePattern">.*zip</parameter>
                    <parameter name="SourceFolder">/ua-ecm-sftp/ecommstaging/ftpdemandware_na/out/catalogs</parameter>
                    <parameter name="TargetFolder">src/catalog/in</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="DeleteRemoteFiles">true</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
            </step>
            <step step-id="Unarchive data" type="custom.CSComponents.UnzipFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="SourceFolder">src/catalog/in</parameter>
                    <parameter name="FilePattern">.*zip</parameter>
                    <parameter name="TargetFolder">src/catalog/out</parameter>
                    <parameter name="RemoveArchivesAfterCompletion">true</parameter>
                    <parameter name="UseArchiveNameAsFolder">true</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
            </step>
            <step step-id="Import Catalogs" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">catalog/out</parameter>
                    <parameter name="FileNamePattern">.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">OK</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive Zipped</parameter>
                    <parameter name="ArchiveFolder">src/archive/catalog/NA</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="CombinePDP" type="IncludeStepsFromJob" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="JobID">CombinePDP</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="false">
                <recurrence>
                    <date-from>2019-01-01Z</date-from>
                    <start-time>05:00:00.000Z</start-time>
                    <interval>1d</interval>
                    <day-of-week>
                        <weekday>Sunday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Friday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Monday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>

    <job job-id="Import PriceBooks" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Download from Amazon S3" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description>to download files from S3 (ecommstaging)</description>
                <parameters>
                    <parameter name="ServiceID">AWS-XML_NA</parameter>
                    <parameter name="KeyAlias">na04-ecomm-staging</parameter>
                    <parameter name="FilePattern">.*xml</parameter>
                    <parameter name="SourceFolder">/ua-ecm-sftp/ecommstaging/ftpdemandware_na/out/pricebooks</parameter>
                    <parameter name="TargetFolder">src/pricebooks</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="DeleteRemoteFiles">true</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                    <parameter name="IsDisabled">false</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <stop-flow/>
                    </on-exit>
                </rules>
            </step>
            <step step-id="Import Pricebooks" type="ImportPriceBook" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">/pricebooks</parameter>
                    <parameter name="FileNamePattern">.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive Zipped</parameter>
                    <parameter name="ArchiveFolder">src/archive/pricebooks/NA</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Create Most Recent Static Copy" type="custom.CSComponents.ZipFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="SourceFolder">src/pricebooks</parameter>
                    <parameter name="FilePattern">.*xml</parameter>
                    <parameter name="TargetFolder">src/archive/pricebooks/NA</parameter>
                    <parameter name="ArchiveName">UA-pricebooks</parameter>
                    <parameter name="RemoveFilesFromSourceFolder">false</parameter>
                    <parameter name="RemoveSourceFolderAfterCompletion">false</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
            </step>
        </flow>	        
        <flow>
            <context site-id="Sites"/>
            <step step-id="Archive Price Files" type="custom.ZipFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="filePattern">.*xml</parameter>
                    <parameter name="sourceFolder">src/pricebooks</parameter>
                    <parameter name="targetFolder">src/archive/pricebooks/NA</parameter>
                    <parameter name="deleteFile">DELETE</parameter>
                    <parameter name="singleFile">SINGLE_ARCHIVE_FILE</parameter>
                </parameters>
            </step>
        </flow>        
        <rules/>
        <triggers>
            <run-recurring enabled="false">
                <recurrence>
                    <date-from>2018-12-12Z</date-from>
                    <start-time>05:00:00.000Z</start-time>
                    <interval>1h</interval>
                    <day-of-week>
                        <weekday>Sunday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Friday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>

      <job job-id="Import Inventory">
        <description>Inventory Import from MAO</description>
        <parameters/>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Download US Inventory from S3" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description>Import inventory from staging folder</description>
                <parameters>
                    <parameter name="ServiceID">AWS-XML_NA</parameter>
                    <parameter name="KeyAlias">na04-ecomm-staging</parameter>
                    <parameter name="FilePattern">.*zip</parameter>
                    <parameter name="SourceFolder">/ua-ecm-sftp/ecommstaging/mao/us/inventory_staging</parameter>
                    <parameter name="TargetFolder">src/inventory/in</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="DeleteRemoteFiles">true</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <stop-job/>
                    </on-exit>
                </rules>
            </step>
            <step step-id="Download CA Inventory from S3" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description>Download inventory from staging folder</description>
                <parameters>
                    <parameter name="ServiceID">AWS-XML_NA</parameter>
                    <parameter name="KeyAlias">na04-ecomm-staging</parameter>
                    <parameter name="FilePattern">.*zip</parameter>
                    <parameter name="SourceFolder">/ua-ecm-sftp/ecommstaging/mao/ca/inventory_staging</parameter>
                    <parameter name="TargetFolder">src/inventory/in</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="DeleteRemoteFiles">true</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <stop-job/>
                    </on-exit>
                </rules>
            </step>
            <step step-id="Unarchive data" type="custom.CSComponents.UnzipFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="SourceFolder">src/inventory/in</parameter>
                    <parameter name="FilePattern">.*zip</parameter>
                    <parameter name="TargetFolder">src/inventory/out</parameter>
                    <parameter name="RemoveArchivesAfterCompletion">true</parameter>
                    <parameter name="UseArchiveNameAsFolder">true</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <stop-job/>
                    </on-exit>
                </rules>
            </step>
            <step step-id="ImportInventory(OOB)" type="ImportInventoryLists" enforce-restart="false">
                <description>This is Out Of Box step. Will replace CSComponent step.</description>
                <parameters>
                    <parameter name="WorkingFolder">inventory/out</parameter>
                    <parameter name="FileNamePattern">.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Keep</parameter>
                    <parameter name="ArchiveFolder">src/archive/inventory/NA</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <stop-job/>
                    </on-exit>
                </rules>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Create Most Recent Static Copy" type="custom.CSComponents.ZipFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="SourceFolder">src/inventory/out</parameter>
                    <parameter name="FilePattern">.*xml</parameter>
                    <parameter name="TargetFolder">src/archive/inventory/NA</parameter>
                    <parameter name="ArchiveName">UA-inventory</parameter>
                    <parameter name="RemoveFilesFromSourceFolder">false</parameter>
                    <parameter name="RemoveSourceFolderAfterCompletion">false</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Archive Inventory Files" type="custom.ZipFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="filePattern">.*xml</parameter>
                    <parameter name="sourceFolder">src/inventory/out</parameter>
                    <parameter name="targetFolder">src/archive/inventory/NA</parameter>
                    <parameter name="deleteFile">DELETE</parameter>
                    <parameter name="singleFile">SINGLE_ARCHIVE_FILE</parameter>
                </parameters>
            </step>
        </flow>
        <rules>
            <on-running runtime-threshold="240m" enabled="true">
                <mark-job-as-hanging/>
                <send-mail>
                    <from>donotreply@demandware.com</from>
                    <to>ECommerce_ProdOps@underarmour.com ,L3_eCommerce@underarmour.com</to>
                    <cc>lcarmona@underarmour.com,minh.nguyen@underarmour.com,suat.erken@underarmour.com, mark.cardelli@underarmour.com, travis.huang@underarmour.com</cc>
                </send-mail>
            </on-running>
            <on-retry enabled="true">
                <send-mail>
                    <from>donotreply@demandware.com</from>
                    <to>ECommerce_ProdOps@underarmour.com ,L3_eCommerce@underarmour.com</to>
                    <cc>lcarmona@underarmour.com,minh.nguyen@underarmour.com,suat.erken@underarmour.com, mark.cardelli@underarmour.com, travis.huang@underarmour.com</cc>
                </send-mail>
            </on-retry>
            <on-exit status="OK,ERROR" enabled="true">
                <send-mail>
                    <from>donotreply@demandware.com</from>
                    <to>ECommerce_ProdOps@underarmour.com ,L3_eCommerce@underarmour.com</to>
                    <cc>lcarmona@underarmour.com,minh.nguyen@underarmour.com,suat.erken@underarmour.com, mark.cardelli@underarmour.com, travis.huang@underarmour.com</cc>
                </send-mail>
            </on-exit>
        </rules>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2018-12-12Z</date-from>
                    <start-time>12:00:00.000Z</start-time>
                    <interval>1d</interval>
                    <day-of-week>
                        <weekday>Sunday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Friday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Saturday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>

    <job job-id="smartlingCheckStatus" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="CA"/>
            <step step-id="checkStatus" type="ExecutePipeline" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ExecutePipeline.Pipeline">smartlingCronJobs-checkStatus</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="false">
                <recurrence>
                    <date-from>2015-03-14Z</date-from>
                    <start-time>21:16:00.000Z</start-time>
                    <interval>3h</interval>
                    <day-of-week>
                        <weekday>Friday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Wednesday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>

    <job job-id="smartlingSendFile" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="CA"/>
            <step step-id="SendFile" type="ExecutePipeline" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ExecutePipeline.Pipeline">smartlingCronJobs-SendFile</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="false">
                <recurrence>
                    <date-from>2015-03-11Z</date-from>
                    <start-time>17:26:00.000Z</start-time>
                    <interval>1m</interval>
                    <day-of-week>
                        <weekday>Friday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Wednesday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>

    <job job-id="MCC-CompileMappingTemplates" priority="0">
        <description/>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="CA"/>
                <template-ref template-id="template_66"/>
            </flow>
            <flow>
                <context site-id="US"/>
                <template-ref template-id="template_66"/>
            </flow>
            <flow-template template-id="template_66">
                <step step-id="mcc-compile-datafeed-templates" type="custom.MCC-CompileMappingTemplates" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ObjectType">DataFeeds</parameter>
                    </parameters>
                </step>
                <step step-id="mcc-compile-trigger-templates" type="custom.MCC-CompileMappingTemplates" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ObjectType">Triggers</parameter>
                    </parameters>
                </step>
                <step step-id="mcc-compile-analytic-templates" type="custom.MCC-CompileMappingTemplates" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ObjectType">Analytics</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2017-10-03Z</date>
                <time>05:03:15.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="MCC-Feed-Catalog" priority="0">
        <description/>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="CA"/>
                <template-ref template-id="template_79"/>
            </flow>
            <flow>
                <context site-id="US"/>
                <template-ref template-id="template_79"/>
            </flow>
            <flow-template template-id="template_79">
                <step step-id="mcc-feed-exportCatalog" type="custom.MCC-Feed-ExportCatalog" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ExportID">catalogFeed</parameter>
                        <parameter name="ExportFileName">catalogFeed.psv</parameter>
                        <parameter name="Delimiter">|</parameter>
                        <parameter name="IncrementalExport">false</parameter>
                    </parameters>
                </step>
                <step step-id="mcc-feed-uploadcatalog" type="custom.MCC-Feed-UploadCatalog" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="SFTPServiceID">marketingcloud.sftp</parameter>
                        <parameter name="ExportFileName">catalogFeed.psv</parameter>
                        <parameter name="TargetPath">/Import/Phoenix-Dev/</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2017-05-30Z</date>
                <time>20:17:25.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="MCC-Feed-Content" priority="0">
        <description/>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="CA"/>
                <template-ref template-id="template_92"/>
            </flow>
            <flow>
                <context site-id="US"/>
                <template-ref template-id="template_92"/>
            </flow>
            <flow-template template-id="template_92">
                <step step-id="mcc-feed-exportContent" type="custom.MCC-Feed-ExportContent" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ExportID">contentFeed</parameter>
                        <parameter name="ExportFileName">contentFeed.psv</parameter>
                        <parameter name="Delimiter">|</parameter>
                        <parameter name="IncrementalExport">false</parameter>
                    </parameters>
                </step>
                <step step-id="mcc-feed-uploadcontent" type="custom.MCC-Feed-UploadContent" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="SFTPServiceID">marketingcloud.sftp</parameter>
                        <parameter name="ExportFileName">contentFeed.psv</parameter>
                        <parameter name="TargetPath">/Import/Phoenix-Dev/</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2017-05-30Z</date>
                <time>20:17:25.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="MCC-Feed-Customers" priority="0">
        <description/>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="CA"/>
                <template-ref template-id="template_186"/>
            </flow>
            <flow>
                <context site-id="US"/>
                <template-ref template-id="template_186"/>
            </flow>
            <flow-template template-id="template_186">
                <step step-id="mcc-feed-exportcustomers" type="custom.MCC-Feed-ExportCustomers" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ExportID">customersFeed</parameter>
                        <parameter name="ExportFileName">customersFeed.psv</parameter>
                        <parameter name="Delimiter">|</parameter>
                        <parameter name="IncrementalExport">true</parameter>
                    </parameters>
                </step>
                <step step-id="mcc-feed-uploadcustomers" type="custom.MCC-Feed-UploadCustomers" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="SFTPServiceID">marketingcloud.mulesoft.sftp</parameter>
                        <parameter name="ExportFileName">customersFeed.psv</parameter>
                        <parameter name="TargetPath">/Import/Mulesoft/CommerceCloud/Input/</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2017-06-19Z</date>
                <time>15:41:10.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="MCC-Feed-Orders" priority="0">
        <description/>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="US"/>
                <template-ref template-id="template_59"/>
            </flow>
            <flow>
                <context site-id="CA"/>
                <template-ref template-id="template_59"/>
            </flow>
            <flow-template template-id="template_59">
                <step step-id="mcc-feed-exportorders" type="custom.MCC-Feed-ExportOrders" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ExportID">ordersFeed</parameter>
                        <parameter name="ExportFileName">ordersFeed.psv</parameter>
                        <parameter name="Delimiter">|</parameter>
                        <parameter name="IncrementalExport">true</parameter>
                    </parameters>
                </step>
                <step step-id="mcc-feed-uploadorders" type="custom.MCC-Feed-UploadOrders" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="SFTPServiceID">marketingcloud.mulesoft.sftp</parameter>
                        <parameter name="ExportFileName">ordersFeed.psv</parameter>
                        <parameter name="TargetPath">/Import/Mulesoft/CommerceCloud/Input/</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2017-06-19Z</date>
                <time>15:37:40.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="MCC-Feed-Promotions" priority="0">
        <description/>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="US"/>
                <template-ref template-id="template_59"/>
            </flow>
            <flow>
                <context site-id="CA"/>
                <template-ref template-id="template_59"/>
            </flow>
            <flow-template template-id="template_59">
                <step step-id="mcc-feed-exportpromotions" type="custom.MCC-Feed-ExportPromotions" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="ExportID">promotionsFeed</parameter>
                        <parameter name="ExportFileName">promotionsFeed.psv</parameter>
                        <parameter name="Delimiter">|</parameter>
                        <parameter name="IncrementalExport">false</parameter>
                    </parameters>
                </step>
                <step step-id="mcc-feed-uploadpromotions" type="custom.MCC-Feed-UploadPromotions" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="SFTPServiceID">marketingcloud.sftp</parameter>
                        <parameter name="ExportFileName">promotionsFeed.psv</parameter>
                        <parameter name="TargetPath">/Import/Phoenix-Dev/</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2017-06-19Z</date>
                <time>15:37:40.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="MCC-InitTriggers" priority="0">
        <description>For developer use, used to recreate trigger configurations</description>
        <parameters/>
        <split sequential="false">
            <flow>
                <context site-id="US"/>
                <template-ref template-id="template_72"/>
            </flow>
            <flow>
                <context site-id="CA"/>
                <template-ref template-id="template_72"/>
            </flow>
            <flow-template template-id="template_72">
                <step step-id="mcc-init-triggers" type="custom.MCC-InitTriggers" enforce-restart="false">
                    <description/>
                    <parameters/>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2017-06-19Z</date>
                <time>08:16:12.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="CombinePDP" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="Sites"/>
            <step step-id="CombinePDP" type="custom.combinepdp" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="exportDirectory">src/temp/combinepdp</parameter>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Import_Catalog_Master" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">temp/combinepdp</parameter>
                    <parameter name="FileNamePattern">^.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive Zipped</parameter>
                    <parameter name="ArchiveFolder">src/archive/combinepdp/NA</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="false">
                <recurrence>
                    <date-from>2019-12-18Z</date-from>
                    <start-time>06:00:00.000Z</start-time>
                    <interval>1d</interval>
                    <day-of-week>
                        <weekday>Thursday</weekday>
                        <weekday>Friday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Saturday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>
     <job job-id="Exchange Rate Update" priority="0">
        <description>Updates ExchangeRate Custom Object with currency exchange rates</description>
        <parameters/>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Update Exchange Rate" type="custom.UpdateExchangeRate" enforce-restart="false">
                    <description/>
                    <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2018-12-12Z</date-from>
                    <start-time>05:00:00.000Z</start-time>
                    <interval>1d</interval>
                    <day-of-week>
                        <weekday>Thursday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Friday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>

    <job job-id="Process eGift Card Orders" priority="0">
        <description>Job to process eGift Card Orders. Generate and send eGift Card details to SFMC.</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="processEGiftCard" type="custom.processEGiftCard" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2020-02-21Z</date-from>
                    <start-time>18:06:38.000Z</start-time>
                    <interval>5m</interval>
                    <day-of-week/>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>

    <job job-id="SRDailyOrders" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="SRFeeds-DailyOrderCount" type="custom.SRDailyOrderCount" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2018-12-12Z</date-from>
                    <start-time>24:00:00.000Z</start-time>
                    <interval>1d</interval>
                    <day-of-week>
                        <weekday>Thursday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Friday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>
    <job job-id="Bazaarvoice Inline Ratings Import" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="Download Rating Feed" type="custom.Bazaarvoice-Download" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Enabled">true</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="Import Ratings" type="custom.Bazaarvoice-Rating-Import" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Enabled">true</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <stop-job/>
                    </on-exit>
                </rules>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Move File to Archive" type="custom.CSComponents.MoveFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FilePattern">^bv_underarmour_incremental_.*.gz</parameter>
                    <parameter name="SourceFolder">/TEMP/bv/ratings</parameter>
                    <parameter name="TargetFolder">IMPEX/src/archive/bv/</parameter>
                    <parameter name="CopyOnly">false</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="Overwrite">true</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
            </step>
        </flow>
        <rules>
            <on-running runtime-threshold="60m" enabled="true">
                <mark-job-as-hanging/>
                <send-mail>
                    <from>jobs@yourdomain.com</from>
                    <to>jobadmin@yourdomain.com</to>
                </send-mail>
            </on-running>
            <on-retry enabled="true">
                <send-mail>
                    <from>jobs@yourdomain.com</from>
                    <to>jobadmin@yourdomain.com</to>
                </send-mail>
            </on-retry>
            <on-exit status="ERROR" enabled="true">
                <send-mail>
                    <from>jobs@yourdomain.com</from>
                    <to>jobadmin@yourdomain.com</to>
                </send-mail>
            </on-exit>
        </rules>
        <triggers>
            <run-once enabled="true">
                <date>2020-04-17Z</date>
                <time>20:15:00.000Z</time>
            </run-once>
        </triggers>
    </job>
	<job job-id="Size Preferences Tokenization" priority="0">
        <description>Size Preferences Tokenization based on product custom attribute</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="SizePreferenceTokenization" type="custom.sizePreferenceTokenization" enforce-restart="false">
                <description>Size Preferences Tokenization xml based on product custom attribute</description>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="ImportSizePreferencesToken" type="ImportCatalog" enforce-restart="false">
                <description>Import Size Preferences Token</description>
                <parameters>
                    <parameter name="WorkingFolder">feeds/sizePreferenceToken</parameter>
                    <parameter name="FileNamePattern">.*tokenization.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">ERROR</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/sizePreferenceToken</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2020-09-15Z</date>
                <time>09:06:48.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="SROrderFeed" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="SRFeeds-OrderFeed" type="custom.SROrderFeed" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2020-04-09Z</date-from>
                    <start-time>07:49:36.000Z</start-time>
                    <interval>1h</interval>
                    <day-of-week>
                        <weekday>Friday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Tuesday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>

    <job job-id="BFProcessPO" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="processPO_US" type="custom.ProcessPO" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2020-04-09Z</date-from>
                    <start-time>07:49:36.000Z</start-time>
                    <interval>15m</interval>
                    <day-of-week>
                        <weekday>Friday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Monday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Tuesday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>
	 <job job-id="DeleteLogFiles" priority="0">
        <description>Delete log files at archive UA location</description>
        <parameters/>
        <flow>
            <context site-id="Sites"/>
            <step step-id="DeleteLogFile" type="custom.DeleteLogFile" enforce-restart="false">
                <description>Copy log files at impex location and Delete the log files</description>
                <parameters>
                    <parameter name="FilePattern">^.*log</parameter>
                    <parameter name="TargetFolder">IMPEX/src/logfiles</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                    <parameter name="DaysToKeep">14</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2020-11-09Z</date>
                <time>07:40:22.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="Talkoot Catalog Import" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="Get Talkoot Data" type="ExecuteScriptModule" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ExecuteScriptModule.Module">int_talkoot/cartridge/scripts/jobs/GetCatalogData.js</parameter>
                    <parameter name="ExecuteScriptModule.FunctionName">execute</parameter>
                    <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                    <parameter name="ExecuteScriptModule.TimeoutInSeconds">25</parameter>
                    <parameter name="FilePath">src/catalog/talkoot</parameter>
                    <parameter name="CatalogID">NACatalog</parameter>
                    <parameter name="TimeZone">-7</parameter>
                    <parameter name="TimeOffset">25</parameter>
                    <parameter name="JobID">35</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="CatalogImport" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">catalog/talkoot</parameter>
                    <parameter name="FileNamePattern">^.*xml$</parameter>
                    <parameter name="NoFilesFoundHandling">OK</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">ERROR</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">archive/Talkoot</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="true">
                <date>2020-08-22Z</date>
                <time>00:25:16.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="DataFeedWatch Inventory" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="DFW-US" type="custom.CustomFeeds-Process" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="feedConfigString">{    "en": {     "locales": ["en_US"], "currency": ["USD"],  "feed": ["DataFeedWatchInventory"],         "variationsOnly":true   } }</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="CA"/>
            <step step-id="DFW-EN-CA" type="custom.CustomFeeds-Process" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="feedConfigString">{ "en": {    "locales": ["en_CA"], "currency": ["CAD"],  "feed": ["DataFeedWatchInventory"],         "variationsOnly":true   } }</parameter>
                </parameters>
            </step>
            <step step-id="DFW-FR-CA" type="custom.CustomFeeds-Process" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="feedConfigString">{ "fr": {    "locales": ["fr_CA"], "currency": ["CAD"],  "feed": ["DataFeedWatchInventory"],         "variationsOnly":true   } }</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2021-03-19Z</date-from>
                    <start-time>17:17:12.000Z</start-time>
                    <interval>1d</interval>
                    <day-of-week>
                        <weekday>Friday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Thursday</weekday>
                        <weekday>Monday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>
	
    <job job-id="Image Assignment Only" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="Check Prep Category" type="custom.checkPrepCategory" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                    <parameter name="prepImageCategoryID">prep_image</parameter>
                </parameters>
                <rules>
                    <on-exit status="NOPRODUCTS">
                        <stop-job/>
                    </on-exit>
                </rules>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="Auto Video Assignment" type="custom.assignVideos" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                    <parameter name="prepImageCategoryID">prep_image</parameter>
                    <parameter name="directory">/src/feeds/imageAssociation/imageonlyjob/</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="Auto Image Assignment" type="custom.assignImages" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                    <parameter name="prepImageCategoryID">prep_image</parameter>
                    <parameter name="directory">/src/feeds/imageAssociation/imageonlyjob/</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Import Image Video Assignment" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/imageAssociation/imageonlyjob</parameter>
                    <parameter name="FileNamePattern">.*associations.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/s7</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="Auto Look Assignment" type="custom.assignShopTheLook" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="IsQueryAllForSiteProducts">false</parameter>
                    <parameter name="limitDOMServiceCall">15</parameter>
                    <parameter name="shopTheLookthresholdDays">30</parameter>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                    <parameter name="prepImageCategoryID">prep_image</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Import Auto Look Assignment" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/shopTheLook</parameter>
                    <parameter name="FileNamePattern">.*ShopTheLook.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">archive/autoLook</parameter>
                </parameters>
            </step>
        </flow>
        <split sequential="false">
            <contexts template-ref="template_185">
                <context site-id="CA"/>
                <context site-id="US"/>
            </contexts>
            <flow-template template-id="template_185">
                <step step-id="Cleanup Prep Category" type="custom.cleanupPrepCategory" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="masterCatalogID">NACatalog</parameter>
                        <parameter name="storefrontCatalogID">NACatalog_storefront</parameter>
                        <parameter name="prepImageCategoryID">prep_image</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Import Clean Prep Category" type="ImportCatalog" enforce-restart="true">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/cleanupPrepCategory</parameter>
                    <parameter name="FileNamePattern">^cleanup_prep_category.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Delete</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/s7</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2020-06-20Z</date>
                <time>02:38:56.000Z</time>
            </run-once>
        </triggers>
    </job>	
	
    <job job-id="Product Images Validation" priority="0">
        <description>The Job Checks For Products With Missing Images In The Viewtypes.</description>
        <parameters/>
        <split sequential="false">
            <contexts template-ref="template_27">
                <context site-id="CA"/>
                <context site-id="US"/>
            </contexts>
            <flow-template template-id="template_27">
                <step step-id="CheckMissingProductImagery" type="custom.CheckMissingProductImagery" enforce-restart="false">
                    <description/>
                    <parameters>
                        <parameter name="emailList">andrew.hale@underarmour.com</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2021-04-12Z</date>
                <time>15:01:24.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="BrandifyStoresFeed" priority="0">
        <description>Update SFCC stores from Brandify store data</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="FetchBrandifyStoresData" type="custom.updateStores" enforce-restart="true">
                <description>Fetch Brandify Stores Data</description>
                <parameters>
                    <parameter name="country">US</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="ImportBrandifyStores" type="ImportStores" enforce-restart="false">
                <description>Import Brandify  stores</description>
                <parameters>
                    <parameter name="WorkingFolder">feeds/stores</parameter>
                    <parameter name="FileNamePattern">.*brandifyStores.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">archive/stores</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2021-09-15Z</date>
                <time>09:38:28.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="RemoveSizeModelImages" priority="0">
        <description>Removing size model images from products</description>
        <parameters/>
        <split sequential="false">
            <contexts template-ref="template_235">
                <context site-id="CA"/>
                <context site-id="US"/>
            </contexts>
            <flow-template template-id="template_235">
                <step step-id="RemoveSizeModelImages" type="custom.removeSizeModelImages" enforce-restart="false">
                    <description>It will generate an XML with size model products without size model images path.</description>
                    <parameters>
                        <parameter name="masterCatalogID">NACatalog</parameter>
                        <parameter name="categoryID">women-clothing-bras</parameter>
                    </parameters>
                </step>
            </flow-template>
        </split>
        <flow>
            <context site-id="Sites"/>
            <step step-id="ImportCatalog" type="ImportCatalog" enforce-restart="false">
                <description>Import the catalog which does not contain Size model images</description>
                <parameters>
                    <parameter name="WorkingFolder">feeds/removeImageAssociation</parameter>
                    <parameter name="FileNamePattern">.*associations.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/s7</parameter>
                </parameters>
            </step>
        </flow>
        <rules>
            <on-running runtime-threshold="60m" enabled="true">
                <mark-job-as-hanging/>
            </on-running>
        </rules>
        <triggers>
            <run-once enabled="false">
                <date>2022-03-17Z</date>
                <time>05:31:50.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="UpdateOrdersWithBOPISAttributes" priority="0">
        <description>Updates Existing Orders With Searchable Attributes To Identify BOPIS Orders.</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="UpdateExistingBopisOrder" type="custom.updateExistingBopisOrderType" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers/>
    </job>
    <job job-id="Update Status of Used Loyalty Coupons" priority="0">
        <description>Update the status of loyalty coupons which failed to be updated when order was placed</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="Update Coupon Status" type="ExecuteScriptModule" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ExecuteScriptModule.Module">int_loyalty/cartridge/scripts/jobs/UpdateCouponStatus.js</parameter>
                    <parameter name="ExecuteScriptModule.FunctionName">execute</parameter>
                    <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="false">
                <recurrence>
                    <date-from>2022-06-03Z</date-from>
                    <start-time>16:05:16.000Z</start-time>
                    <interval>1h</interval>
                    <day-of-week/>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>
<job job-id="Catalog Category Export">
		<description/>
		<parameters/>
		<flow>
			<context site-id="Sites"/>
			<step step-id="StorefrontCatalog-Export" type="ExportCatalog" enforce-restart="false">
				<description/>
				<parameters>
					<parameter name="CatalogID">NACatalog_storefront</parameter>
					<parameter name="ExportCategories">false</parameter>
					<parameter name="ExportProducts">false</parameter>
					<parameter name="ExportCategoryAssignments">true</parameter>
					<parameter name="ExportProductOptions">false</parameter>
					<parameter name="ExportRecommendations">false</parameter>
					<parameter name="ExportVariationAttributes">false</parameter>
					<parameter name="ExportFile">/feeds/Category/NACatalog_storefront_Category</parameter>
					<parameter name="OverwriteExportFile">true</parameter>
				</parameters>
			</step>
		</flow>
		<flow>
			<context site-id="Sites"/>
			<step step-id="Zip File" type="custom.CSComponents.ZipFiles" enforce-restart="false">
				<description/>
				<parameters>
					<parameter name="SourceFolder">/src/feeds/Category</parameter>
					<parameter name="FilePattern">NACatalog_storefront_Category.xml</parameter>
					<parameter name="TargetFolder">/src/feeds/Category</parameter>
					<parameter name="ArchiveName">NACatalog_storefront_Category.zip</parameter>
					<parameter name="RemoveFilesFromSourceFolder">true</parameter>
					<parameter name="RemoveSourceFolderAfterCompletion">false</parameter>
					<parameter name="NoFileFoundStatus">OK</parameter>
				</parameters>
			</step>
		</flow>
		<rules/>
		<triggers>
			<run-once enabled="false">
				<date>2024-03-20Z</date>
				<time>12:31:00.000Z</time>
			</run-once>
		</triggers>
	</job>    
    <job job-id="CancelNonPaidAurusCreditCardOrders" priority="0">
        <description>The purpose of this job is to Cancel the Aurus Credit Card orders with not paid status.</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="CancelNonPaidCreditCardOrders" type="custom.failAuruspayCreditCardOrders" enforce-restart="false">
                <description>Cancel orders for Aurus Credit Card with non-paid status</description>
                <parameters>
                    <parameter name="startDate">2022-07-25</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2022-07-25Z</date>
                <time>12:29:01.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="Assign Locale-Specific Display Value" priority="0">
        <description>The purpose of this job is to assign locale-specific display values to length variation attribute and import catalog</description>
        <parameters/>
        <flow>
            <context site-id="CA"/>
            <step step-id="AssignDisplayValue" type="custom.assignDisplayValue" enforce-restart="false">
                <description>Prepares xml having locale specific values</description>
                <parameters>
                    <parameter name="masterCatalogID">NACatalog</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="importDisplayValue" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">/feeds/assignDisplayValue/</parameter>
                    <parameter name="FileNamePattern">AssignDisplayValue.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">archive/assignDisplayValue</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2022-08-29Z</date>
                <time>13:58:16.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="Sitemaps XMLs Import" priority="0">
        <description>Job used to import the custom sitemaps XMLs from Google Cloud SFTP</description>
        <parameters/>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Download Sitemaps XMLs Files from SFTP" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description>Download Sitemaps XMLs Files from SFTP</description>
                <parameters>
                    <parameter name="ServiceID">sitemaps_SFTP_service</parameter>
                    <parameter name="FilePattern">^.*zip</parameter>
                    <parameter name="SourceFolder">/home/seo_analytics/sitemaps/</parameter>
                    <parameter name="TargetFolder">src/sitemaps/zip</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <stop-job/>
                    </on-exit>
                </rules>
            </step>
            <step step-id="UnZip Sitemaps XMLs files" type="custom.UnzipFiles" enforce-restart="false">
                <description>UnZip Sitemaps XMLs files</description>
                <parameters>
                    <parameter name="filePattern">^.*zip</parameter>
                    <parameter name="sourceFolder">src/sitemaps/zip</parameter>
                    <parameter name="targetFolder">src/sitemaps</parameter>
                    <parameter name="deleteFile">DELETE</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <stop-job/>
                    </on-exit>
                </rules>
            </step>
        </flow>
        <flow>
            <context site-id="US"/>
            <step step-id="Import Sitemaps XMLs US" type="ExecuteScriptModule" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ExecuteScriptModule.Module">bc_jobs/cartridge/scripts/sitemaps/ImportSitemapsXML.js</parameter>
                    <parameter name="ExecuteScriptModule.FunctionName">execute</parameter>
                    <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                    <parameter name="ExecuteScriptModule.TimeoutInSeconds">3600</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <continue/>
                    </on-exit>
                </rules>
            </step>
        </flow>
        <flow>
            <context site-id="CA"/>
            <step step-id="Import Sitemaps XMLs CA" type="ExecuteScriptModule" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ExecuteScriptModule.Module">bc_jobs/cartridge/scripts/sitemaps/ImportSitemapsXML.js</parameter>
                    <parameter name="ExecuteScriptModule.FunctionName">execute</parameter>
                    <parameter name="ExecuteScriptModule.Transactional">false</parameter>
                    <parameter name="ExecuteScriptModule.TimeoutInSeconds">3600</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <continue/>
                    </on-exit>
                </rules>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2022-08-24Z</date>
                <time>10:51:42.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="ConstructorSyncProductData - Full Update - FR-CA" priority="0">
        <description>Export product data to Constructor.io for the FR-CA locale</description>
        <parameters/>
        <flow>
            <context site-id="CA"/>
            <step step-id="writeFiles" type="custom.constructor.writeProductFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="PartialByLastSyncDate">false</parameter>
                    <parameter name="SendOfflineVariants">false</parameter>
                    <parameter name="IncludeMasterProductsOutOfStock">true</parameter>
                    <parameter name="Locale">fr_CA</parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="Switch To Full Update" type="custom.constructor.updateIngestionStrategy" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="DataType">product</parameter>
                    <parameter name="Strategy">FULL</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas" type="custom.constructor.sendProductDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                    <parameter name="Section">Products</parameter>
                </parameters>
            </step>
            <step step-id="updateLastSyncDate" type="custom.constructor.updateLastSyncDate" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2023-09-28Z</date>
                <time>19:09:00.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="ConstructorSyncCategorySectionData" priority="0">
        <description>Export category data to Constructor.io, into the Categories section of the index</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="writeFiles - EN-US" type="custom.constructor.writeCategorySectionFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Locale"></parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas - EN-US" type="custom.constructor.sendCategorySectionDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="CA"/>
            <step step-id="writeFiles - EN-CA" type="custom.constructor.writeCategorySectionFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Locale"></parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas - EN-CA" type="custom.constructor.sendCategorySectionDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                </parameters>
            </step>
            <step step-id="writeFiles - FR-CA" type="custom.constructor.writeCategorySectionFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Locale">fr_CA</parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas - FR-CA" type="custom.constructor.sendCategorySectionDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                </parameters>
            </step>
        </flow>
        <rules>
            <on-running runtime-threshold="60m" enabled="false">
                <mark-job-as-hanging/>
            </on-running>
        </rules>
        <triggers>
            <run-once enabled="false">
                <date>2023-05-31Z</date>
                <time>21:35:00.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="ConstructorSyncProductData - Incremental Update" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="writeFiles - EN-US" type="custom.constructor.writeProductFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="PartialByLastSyncDate">false</parameter>
                    <parameter name="SendOfflineVariants">false</parameter>
                    <parameter name="IncludeMasterProductsOutOfStock">true</parameter>
                    <parameter name="Locale"></parameter>
                    <parameter name="Ids"></parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="Switch To Incremental Update - EN-US" type="custom.constructor.updateIngestionStrategy" enforce-restart="false">
                <description>Switch the product ingestion strategy to Patch Delta(Create)</description>
                <parameters>
                    <parameter name="DataType">product</parameter>
                    <parameter name="Strategy">PATCH_DELTA_CREATE</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas - EN-US" type="custom.constructor.sendProductDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                    <parameter name="Section">Products</parameter>
                </parameters>
            </step>
            <step step-id="updateLastSyncDate - EN-US" type="custom.constructor.updateLastSyncDate" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <flow>
            <context site-id="CA"/>
            <step step-id="writeFiles - EN-CA" type="custom.constructor.writeProductFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="PartialByLastSyncDate">false</parameter>
                    <parameter name="SendOfflineVariants">false</parameter>
                    <parameter name="IncludeMasterProductsOutOfStock">true</parameter>
                    <parameter name="Locale"></parameter>
                    <parameter name="Ids"></parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="Switch To Incremental Update - EN-CA" type="custom.constructor.updateIngestionStrategy" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="DataType">product</parameter>
                    <parameter name="Strategy">PATCH_DELTA_CREATE</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas - EN-CA" type="custom.constructor.sendProductDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                    <parameter name="Section">Products</parameter>
                </parameters>
            </step>
            <step step-id="updateLastSyncDate - EN-CA" type="custom.constructor.updateLastSyncDate" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
            <step step-id="writeFiles - FR-CA" type="custom.constructor.writeProductFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="PartialByLastSyncDate">false</parameter>
                    <parameter name="SendOfflineVariants">false</parameter>
                    <parameter name="IncludeMasterProductsOutOfStock">true</parameter>
                    <parameter name="Locale">fr_CA</parameter>
                    <parameter name="Ids"></parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="Switch To Incremental Update - FR-CA" type="custom.constructor.updateIngestionStrategy" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="DataType">product</parameter>
                    <parameter name="Strategy">PATCH_DELTA_CREATE</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas - FR-CA" type="custom.constructor.sendProductDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                    <parameter name="Section">Products</parameter>
                </parameters>
            </step>
            <step step-id="updateLastSyncDate - FR-CA" type="custom.constructor.updateLastSyncDate" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2023-09-27Z</date>
                <time>19:06:00.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="ConstructorSyncProductData - Full Update - EN-US" priority="0">
        <description>Export product data to Constructor.io for the EN-US locale</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="writeFiles" type="custom.constructor.writeProductFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="PartialByLastSyncDate">false</parameter>
                    <parameter name="SendOfflineVariants">false</parameter>
                    <parameter name="IncludeMasterProductsOutOfStock">true</parameter>
                    <parameter name="Locale"></parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="Switch To Full Update" type="custom.constructor.updateIngestionStrategy" enforce-restart="false">
                <description>Switch the product ingestion strategy to Full</description>
                <parameters>
                    <parameter name="DataType">product</parameter>
                    <parameter name="Strategy">FULL</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas" type="custom.constructor.sendProductDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                    <parameter name="Section">Products</parameter>
                </parameters>
            </step>
            <step step-id="updateLastSyncDate" type="custom.constructor.updateLastSyncDate" enforce-restart="false">
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2023-09-27Z</date>
                <time>19:06:00.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="ConstructorSyncFacetMetaData" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="buildAndSendData - EN-US" type="custom.constructor.buildFacetMetadata" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Locale"></parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="CA"/>
            <step step-id="buildAndSendData - EN-CA" type="custom.constructor.buildFacetMetadata" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Locale"></parameter>
                </parameters>
            </step>
            <step step-id="buildAndSendData - FR-CA" type="custom.constructor.buildFacetMetadata" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Locale">fr_CA</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2023-09-27Z</date>
                <time>19:06:00.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="ConstructorSyncCategoryData" priority="0">
        <description>Export category to Constructor.io</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="writeFiles - EN-US" type="custom.constructor.writeCategoryFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Locale"></parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas - EN-US" type="custom.constructor.sendCategoryDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="CA"/>
            <step step-id="writeFiles - EN-CA" type="custom.constructor.writeCategoryFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Locale"></parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas - EN-CA" type="custom.constructor.sendCategoryDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                </parameters>
            </step>
            <step step-id="writeFiles - FR-CA" type="custom.constructor.writeCategoryFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="Locale">fr_CA</parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas - FR-CA" type="custom.constructor.sendCategoryDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2023-09-27Z</date>
                <time>19:06:00.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="ConstructorSyncProductData - Full Update - EN-CA" priority="0">
        <description>Export product data to Constructor.io for the EN-CA locale</description>
        <parameters/>
        <flow>
            <context site-id="CA"/>
            <step step-id="writeFiles" type="custom.constructor.writeProductFiles" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="PartialByLastSyncDate">false</parameter>
                    <parameter name="SendOfflineVariants">false</parameter>
                    <parameter name="IncludeMasterProductsOutOfStock">true</parameter>
                    <parameter name="Locale"></parameter>
                    <parameter name="WriteFolder">/src/Constructor/</parameter>
                </parameters>
            </step>
            <step step-id="Switch To Full Update" type="custom.constructor.updateIngestionStrategy" enforce-restart="false">
                <description>Switch the product ingestion strategy to Full</description>
                <parameters>
                    <parameter name="DataType">product</parameter>
                    <parameter name="Strategy">FULL</parameter>
                </parameters>
            </step>
            <step step-id="sendDeltas" type="custom.constructor.sendProductDeltas" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="FileAction">ARCHIVE</parameter>
                    <parameter name="ArchivePath">/src/Constructor/archive</parameter>
                    <parameter name="ErrorPath">/src/Constructor/error</parameter>
                    <parameter name="Section">Products</parameter>
                </parameters>
            </step>
            <step step-id="updateLastSyncDate" type="custom.constructor.updateLastSyncDate" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2023-09-28Z</date>
                <time>16:48:00.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="Update Shipping Method EDD Custom Object" priority="0">
        <description>Update Shipping Method EDD Custom Object</description>
        <parameters/>
        <split sequential="false">
            <contexts template-ref="template_715">
                <context site-id="CA"/>
                <context site-id="US"/>
            </contexts>
            <flow-template template-id="template_715">
                <step step-id="Run" type="custom.updateShippingMethodEDDCO" enforce-restart="false">
                    <description>Update the EDD in custom objects if they have expired.</description>
                    <parameters/>
                </step>
            </flow-template>
        </split>
        <rules/>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2023-12-15Z</date-from>
                    <start-time>19:56:00.000Z</start-time>
                    <interval>1h</interval>
                    <day-of-week>
                        <weekday>Thursday</weekday>
                        <weekday>Tuesday</weekday>
                        <weekday>Friday</weekday>
                        <weekday>Sunday</weekday>
                        <weekday>Saturday</weekday>
                        <weekday>Wednesday</weekday>
                        <weekday>Monday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>
    <job job-id="MasterProductsCleanup" priority="0">
        <description>Delete Old master products which does not have any variants assigned.</description>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="MasterProductCleanup" type="custom.masterProductsCleanup" enforce-restart="false">
                <description>Delete the old master product which does not have a variant associated with it.</description>
                <parameters>
                    <parameter name="deleteProduct">false</parameter>
                    <parameter name="MasterCatalogId">NACatalog</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="ImportDeleteCatalog" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/masterProductCleanup</parameter>
                    <parameter name="FileNamePattern">^.*masterProductCleanup*.*xml</parameter>
                    <parameter name="NoFilesFoundHandling">OK</parameter>
                    <parameter name="ImportMode">Delete</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">src/archive/masterProductCleanup</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2024-01-04Z</date>
                <time>14:58:00.000Z</time>
                <rules>
                    <on-exit status="ERROR">
                        <disable-trigger/>
                    </on-exit>
                </rules>
            </run-once>
        </triggers>
    </job>
    <job job-id="Combine Slipspeed" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Combine Slip Speed Products" type="custom.combineProducts" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="MasterCatalogId">NACatalog</parameter>
                    <parameter name="fileName">combine_products</parameter>
                    <parameter name="directory">src/catalog/custom</parameter>
                </parameters>
                <rules>
                    <on-exit status="ERROR">
                        <stop-job/>
                    </on-exit>
                </rules>
            </step>
        </flow>
        <flow>
            <context site-id="Sites"/>
            <step step-id="Import Catalog" type="ImportCatalog" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">catalog/custom</parameter>
                    <parameter name="FileNamePattern">combine_products.xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Archive</parameter>
                    <parameter name="ArchiveFolder">archive</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2024-01-30Z</date>
                <time>15:22:00.000Z</time>
            </run-once>
        </triggers>
    </job>
    <job job-id="Post data replication tasks" priority="0">
        <description/>
        <parameters/>
        <flow>
            <context site-id="US"/>
            <step step-id="Download promotions XML file from AWS S3 US" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ServiceID">AWS-XML_NA</parameter>
                    <parameter name="KeyAlias">na04-ecomm-staging</parameter>
                    <parameter name="FilePattern">qa_team_promotions_us.xml</parameter>
                    <parameter name="SourceFolder">/ua-ecm-sftp/ecommstaging/qa_team_promotions/na</parameter>
                    <parameter name="TargetFolder">src/feeds/qa_team_promotions/na</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                    <parameter name="IsDisabled">false</parameter>
                </parameters>
            </step>
            <step step-id="Import Promotions US" type="ImportPromotions" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/qa_team_promotions/na</parameter>
                    <parameter name="FileNamePattern">qa_team_promotions_us.xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Keep</parameter>
                    <parameter name="ArchiveFolder">archive</parameter>
                </parameters>
            </step>
            <step step-id="Download coupons XML file from AWS S3 US" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ServiceID">AWS-XML_NA</parameter>
                    <parameter name="KeyAlias">na04-ecomm-staging</parameter>
                    <parameter name="FilePattern">qa_team_coupons_us.xml</parameter>
                    <parameter name="SourceFolder">/ua-ecm-sftp/ecommstaging/qa_team_promotions/na</parameter>
                    <parameter name="TargetFolder">src/feeds/qa_team_promotions/na</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
            </step>
            <step step-id="Import Coupons US" type="ImportCoupons" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/qa_team_promotions/na</parameter>
                    <parameter name="FileNamePattern">qa_team_coupons_us.xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Keep</parameter>
                    <parameter name="ArchiveFolder">archive</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="CA"/>
            <step step-id="Download promotions XML file from AWS S3 CA" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ServiceID">AWS-XML_NA</parameter>
                    <parameter name="KeyAlias">na04-ecomm-staging</parameter>
                    <parameter name="FilePattern">qa_team_promotions_ca.xml</parameter>
                    <parameter name="SourceFolder">/ua-ecm-sftp/ecommstaging/qa_team_promotions/na</parameter>
                    <parameter name="TargetFolder">src/feeds/qa_team_promotions/na</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                    <parameter name="IsDisabled">false</parameter>
                </parameters>
            </step>
            <step step-id="Import Promotions CA" type="ImportPromotions" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/qa_team_promotions/na</parameter>
                    <parameter name="FileNamePattern">qa_team_promotions_ca.xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Keep</parameter>
                    <parameter name="ArchiveFolder">archive</parameter>
                </parameters>
            </step>
            <step step-id="Download coupons XML file from AWS S3 CA" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ServiceID">AWS-XML_NA</parameter>
                    <parameter name="KeyAlias">na04-ecomm-staging</parameter>
                    <parameter name="FilePattern">qa_team_coupons_ca.xml</parameter>
                    <parameter name="SourceFolder">/ua-ecm-sftp/ecommstaging/qa_team_promotions/na</parameter>
                    <parameter name="TargetFolder">src/feeds/qa_team_promotions/na</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
            </step>
            <step step-id="Import Coupons CA" type="ImportCoupons" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/qa_team_promotions/na</parameter>
                    <parameter name="FileNamePattern">qa_team_coupons_ca.xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Keep</parameter>
                    <parameter name="ArchiveFolder">archive</parameter>
                </parameters>
            </step>
        </flow>
        <flow>
            <context site-id="MX"/>
            <step step-id="Download promotions XML file from AWS S3 MX" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ServiceID">AWS-XML_NA</parameter>
                    <parameter name="KeyAlias">na04-ecomm-staging</parameter>
                    <parameter name="FilePattern">qa_team_promotions_mx.xml</parameter>
                    <parameter name="SourceFolder">/ua-ecm-sftp/ecommstaging/qa_team_promotions/na</parameter>
                    <parameter name="TargetFolder">src/feeds/qa_team_promotions/na</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                    <parameter name="IsDisabled">false</parameter>
                </parameters>
            </step>
            <step step-id="Import Promotions MX" type="ImportPromotions" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/qa_team_promotions/na</parameter>
                    <parameter name="FileNamePattern">qa_team_promotions_mx.xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Keep</parameter>
                    <parameter name="ArchiveFolder">archive</parameter>
                </parameters>
            </step>
            <step step-id="Download coupons XML file from AWS S3 MX" type="custom.CSComponents.FtpDownload" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="ServiceID">AWS-XML_NA</parameter>
                    <parameter name="KeyAlias">na04-ecomm-staging</parameter>
                    <parameter name="FilePattern">qa_team_coupons_mx.xml</parameter>
                    <parameter name="SourceFolder">/ua-ecm-sftp/ecommstaging/qa_team_promotions/na</parameter>
                    <parameter name="TargetFolder">src/feeds/qa_team_promotions/na</parameter>
                    <parameter name="Recursive">false</parameter>
                    <parameter name="NoFileFoundStatus">OK</parameter>
                </parameters>
            </step>
            <step step-id="Import Coupons MX" type="ImportCoupons" enforce-restart="false">
                <description/>
                <parameters>
                    <parameter name="WorkingFolder">feeds/qa_team_promotions/na</parameter>
                    <parameter name="FileNamePattern">qa_team_coupons_mx.xml</parameter>
                    <parameter name="NoFilesFoundHandling">NO_FILES_FOUND</parameter>
                    <parameter name="ImportMode">Merge</parameter>
                    <parameter name="ImportFailedHandling">WARN</parameter>
                    <parameter name="AfterImportFileHandling">Keep</parameter>
                    <parameter name="ArchiveFolder">archive</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-recurring enabled="true">
                <recurrence>
                    <date-from>2024-02-23Z</date-from>
                    <start-time>07:00:00.000Z</start-time>
                    <interval>24h</interval>
                    <day-of-week>
                        <weekday>Friday</weekday>
                    </day-of-week>
                </recurrence>
            </run-recurring>
        </triggers>
    </job>
</jobs>
