{
  "root": true,
  "extends": "airbnb-base/legacy",
  "env": {
    "es6": false,
    "mocha": true
  },
  "globals": {
    "request": true,
    "dw": true,
    "XML": true,
    "empty": true
  },
  "rules": {
    "strict": 0,
    "vars-on-top": 0,
    "global-require": 0,
    "no-param-reassign": 0,
    "max-len": [
      "error",
      {
        "code": 250,
        "comments": 250
      }
    ],
    "func-names": "off",
    "no-unused-vars": [
      "error",
      {
        "argsIgnorePattern": "^_",
        "varsIgnorePattern": "^_"
      }
    ],

    /**
     * Object shorthands are not supported in SFRA < 22.7.
     * To support older sandbox versions, we need to forbid this.
     * @see https://documentation.b2c.commercecloud.salesforce.com/DOC2/index.jsp?topic=%2Fcom.demandware.dochelp%2Fcontent%2Fb2c_commerce%2Ftopics%2Fsite_development%2Fb2c_compatibility_mode_considerations.html
     */
    "object-shorthand": ["error", "never"],

    /**
     * A few syntax features are not supported in SFRA < 22.7.
     * To support older sandbox versions, we need to forbid this.
     * @see https://documentation.b2c.commercecloud.salesforce.com/DOC2/index.jsp?topic=%2Fcom.demandware.dochelp%2Fcontent%2Fb2c_commerce%2Ftopics%2Fsite_development%2Fb2c_compatibility_mode_considerations.html
     *
     * Blocked syntax:
     * - TemplateLiteral (e.g. `Hello ${name}`)
     */
    "no-restricted-syntax": [
      "error",
      "TemplateLiteral",

      // SFRA Compatibility Mode Changes don't necessarily mention those, but it does break when used with `18.10` version
      {
        "selector": "CallExpression[callee.object.name='Object'][callee.property.name='assign']",
        "message": "Object.assign is not supported!"
      },
      {
        "selector": "CallExpression[callee.property.name='find']",
        "message": "Array.prototype.find is not supported!"
      },
      {
        "selector": "CallExpression[callee.property.name='includes']",
        "message": "Array.prototype.includes is not supported!"
      }
    ]
  },
  "overrides": [
    {
      "files": ["*.test.js"],
      "rules": {
        "no-unused-expressions": "off"
      },
      "globals": {
        "assert": true,
        "chai": true
      }
    }
  ]
}
